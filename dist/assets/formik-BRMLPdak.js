import{d as rr}from"./deepmerge-DhIoniG1.js";import{c as G,i as yr,t as Tr,a as Sr}from"./lodash-es-dVqQl90_.js";import{r as f}from"./react-DUBliRcD.js";import{i as k}from"./react-fast-compare-BJeHnFmZ.js";import"./hoist-non-react-statics-Buxaj0Kl.js";function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n])}return e},T.apply(this,arguments)}function mr(e,t){if(e==null)return{};var u={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(u[o]=e[o]);return u}var j=f.createContext(void 0);j.displayName="FormikContext";j.Provider;j.Consumer;function Br(){var e=f.useContext(j);return e}var C=function(t){return typeof t=="function"},K=function(t){return t!==null&&typeof t=="object"},Hr=function(t){return String(Math.floor(Number(t)))===t},Z=function(t){return Object.prototype.toString.call(t)==="[object String]"},x=function(t){return K(t)&&C(t.then)};function m(e,t,u,n){n===void 0&&(n=0);for(var o=Tr(t);e&&n<o.length;)e=e[o[n++]];return n!==o.length&&!e||e===void 0?u:e}function O(e,t,u){for(var n=Sr(e),o=n,s=0,v=Tr(t);s<v.length-1;s++){var y=v[s],F=m(e,v.slice(0,s+1));if(F&&(K(F)||Array.isArray(F)))o=o[y]=Sr(F);else{var b=v[s+1];o=o[y]=Hr(b)&&Number(b)>=0?[]:{}}}return(s===0?e:o)[v[s]]===u?e:(u===void 0?delete o[v[s]]:o[v[s]]=u,s===0&&u===void 0&&delete n[v[s]],n)}function Ir(e,t,u,n){u===void 0&&(u=new WeakMap),n===void 0&&(n={});for(var o=0,s=Object.keys(e);o<s.length;o++){var v=s[o],y=e[v];K(y)?u.get(y)||(u.set(y,!0),n[v]=Array.isArray(y)?[]:{},Ir(y,t,u,n[v])):n[v]=t}return n}function Pr(e,t){switch(t.type){case"SET_VALUES":return T({},e,{values:t.payload});case"SET_TOUCHED":return T({},e,{touched:t.payload});case"SET_ERRORS":return k(e.errors,t.payload)?e:T({},e,{errors:t.payload});case"SET_STATUS":return T({},e,{status:t.payload});case"SET_ISSUBMITTING":return T({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return T({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return T({},e,{values:O(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return T({},e,{touched:O(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return T({},e,{errors:O(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return T({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return T({},e,{touched:Ir(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return T({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return T({},e,{isSubmitting:!1});default:return e}}var D={},W={};function re(e){var t=e.validateOnChange,u=t===void 0?!0:t,n=e.validateOnBlur,o=n===void 0?!0:n,s=e.validateOnMount,v=s===void 0?!1:s,y=e.isInitialValid,F=e.enableReinitialize,b=F===void 0?!1:F,tr=e.onSubmit,br=mr(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),c=T({validateOnChange:u,validateOnBlur:o,validateOnMount:v,onSubmit:tr},br),A=f.useRef(c.initialValues),V=f.useRef(c.initialErrors||D),M=f.useRef(c.initialTouched||W),w=f.useRef(c.initialStatus),R=f.useRef(!1),L=f.useRef({});f.useEffect(function(){return R.current=!0,function(){R.current=!1}},[]);var Ar=f.useState(0),Rr=Ar[1],H=f.useRef({values:G(c.initialValues),errors:G(c.initialErrors)||D,touched:G(c.initialTouched)||W,status:G(c.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),E=H.current,p=f.useCallback(function(r){var i=H.current;H.current=Pr(i,r),i!==H.current&&Rr(function(a){return a+1})},[]),ir=f.useCallback(function(r,i){return new Promise(function(a,l){var d=c.validate(r,i);d==null?a(D):x(d)?d.then(function(h){a(h||D)},function(h){l(h)}):a(d)})},[c.validate]),$=f.useCallback(function(r,i){var a=c.validationSchema,l=C(a)?a(i):a,d=i&&l.validateAt?l.validateAt(i,r):Wr(r,l);return new Promise(function(h,S){d.then(function(){h(D)},function(_){_.name==="ValidationError"?h(Gr(_)):S(_)})})},[c.validationSchema]),nr=f.useCallback(function(r,i){return new Promise(function(a){return a(L.current[r].validate(i))})},[]),ar=f.useCallback(function(r){var i=Object.keys(L.current).filter(function(l){return C(L.current[l].validate)}),a=i.length>0?i.map(function(l){return nr(l,m(r,l))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(a).then(function(l){return l.reduce(function(d,h,S){return h==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||h&&(d=O(d,i[S],h)),d},{})})},[nr]),gr=f.useCallback(function(r){return Promise.all([ar(r),c.validationSchema?$(r):{},c.validate?ir(r):{}]).then(function(i){var a=i[0],l=i[1],d=i[2],h=rr.all([a,l,d],{arrayMerge:jr});return h})},[c.validate,c.validationSchema,ar,ir,$]),g=I(function(r){return r===void 0&&(r=E.values),p({type:"SET_ISVALIDATING",payload:!0}),gr(r).then(function(i){return R.current&&(p({type:"SET_ISVALIDATING",payload:!1}),p({type:"SET_ERRORS",payload:i})),i})});f.useEffect(function(){v&&R.current===!0&&k(A.current,c.initialValues)&&g(A.current)},[v,g]);var B=f.useCallback(function(r){var i=r&&r.values?r.values:A.current,a=r&&r.errors?r.errors:V.current?V.current:c.initialErrors||{},l=r&&r.touched?r.touched:M.current?M.current:c.initialTouched||{},d=r&&r.status?r.status:w.current?w.current:c.initialStatus;A.current=i,V.current=a,M.current=l,w.current=d;var h=function(){p({type:"RESET_FORM",payload:{isSubmitting:!!r&&!!r.isSubmitting,errors:a,touched:l,status:d,values:i,isValidating:!!r&&!!r.isValidating,submitCount:r&&r.submitCount&&typeof r.submitCount=="number"?r.submitCount:0}})};if(c.onReset){var S=c.onReset(E.values,pr);x(S)?S.then(h):h()}else h()},[c.initialErrors,c.initialStatus,c.initialTouched,c.onReset]);f.useEffect(function(){R.current===!0&&!k(A.current,c.initialValues)&&b&&(A.current=c.initialValues,B(),v&&g(A.current))},[b,c.initialValues,B,v,g]),f.useEffect(function(){b&&R.current===!0&&!k(V.current,c.initialErrors)&&(V.current=c.initialErrors||D,p({type:"SET_ERRORS",payload:c.initialErrors||D}))},[b,c.initialErrors]),f.useEffect(function(){b&&R.current===!0&&!k(M.current,c.initialTouched)&&(M.current=c.initialTouched||W,p({type:"SET_TOUCHED",payload:c.initialTouched||W}))},[b,c.initialTouched]),f.useEffect(function(){b&&R.current===!0&&!k(w.current,c.initialStatus)&&(w.current=c.initialStatus,p({type:"SET_STATUS",payload:c.initialStatus}))},[b,c.initialStatus,c.initialTouched]);var ur=I(function(r){if(L.current[r]&&C(L.current[r].validate)){var i=m(E.values,r),a=L.current[r].validate(i);return x(a)?(p({type:"SET_ISVALIDATING",payload:!0}),a.then(function(l){return l}).then(function(l){p({type:"SET_FIELD_ERROR",payload:{field:r,value:l}}),p({type:"SET_ISVALIDATING",payload:!1})})):(p({type:"SET_FIELD_ERROR",payload:{field:r,value:a}}),Promise.resolve(a))}else if(c.validationSchema)return p({type:"SET_ISVALIDATING",payload:!0}),$(E.values,r).then(function(l){return l}).then(function(l){p({type:"SET_FIELD_ERROR",payload:{field:r,value:m(l,r)}}),p({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Cr=f.useCallback(function(r,i){var a=i.validate;L.current[r]={validate:a}},[]),Fr=f.useCallback(function(r){delete L.current[r]},[]),or=I(function(r,i){p({type:"SET_TOUCHED",payload:r});var a=i===void 0?o:i;return a?g(E.values):Promise.resolve()}),lr=f.useCallback(function(r){p({type:"SET_ERRORS",payload:r})},[]),cr=I(function(r,i){var a=C(r)?r(E.values):r;p({type:"SET_VALUES",payload:a});var l=i===void 0?u:i;return l?g(a):Promise.resolve()}),P=f.useCallback(function(r,i){p({type:"SET_FIELD_ERROR",payload:{field:r,value:i}})},[]),U=I(function(r,i,a){p({type:"SET_FIELD_VALUE",payload:{field:r,value:i}});var l=a===void 0?u:a;return l?g(O(E.values,r,i)):Promise.resolve()}),sr=f.useCallback(function(r,i){var a=i,l=r,d;if(!Z(r)){r.persist&&r.persist();var h=r.target?r.target:r.currentTarget,S=h.type,_=h.name,Q=h.id,X=h.value,Ur=h.checked,qr=h.outerHTML,Er=h.options,Nr=h.multiple;a=i||_||Q,l=/number|range/.test(S)?(d=parseFloat(X),isNaN(d)?"":d):/checkbox/.test(S)?$r(m(E.values,a),Ur,X):Er&&Nr?Kr(Er):X}a&&U(a,l)},[U,E.values]),z=I(function(r){if(Z(r))return function(i){return sr(i,r)};sr(r)}),N=I(function(r,i,a){i===void 0&&(i=!0),p({type:"SET_FIELD_TOUCHED",payload:{field:r,value:i}});var l=a===void 0?o:a;return l?g(E.values):Promise.resolve()}),fr=f.useCallback(function(r,i){r.persist&&r.persist();var a=r.target,l=a.name,d=a.id,h=a.outerHTML,S=i||l||d;N(S,!0)},[N]),Y=I(function(r){if(Z(r))return function(i){return fr(i,r)};fr(r)}),dr=f.useCallback(function(r){C(r)?p({type:"SET_FORMIK_STATE",payload:r}):p({type:"SET_FORMIK_STATE",payload:function(){return r}})},[]),vr=f.useCallback(function(r){p({type:"SET_STATUS",payload:r})},[]),hr=f.useCallback(function(r){p({type:"SET_ISSUBMITTING",payload:r})},[]),q=I(function(){return p({type:"SUBMIT_ATTEMPT"}),g().then(function(r){var i=r instanceof Error,a=!i&&Object.keys(r).length===0;if(a){var l;try{if(l=Lr(),l===void 0)return}catch(d){throw d}return Promise.resolve(l).then(function(d){return R.current&&p({type:"SUBMIT_SUCCESS"}),d}).catch(function(d){if(R.current)throw p({type:"SUBMIT_FAILURE"}),d})}else if(R.current&&(p({type:"SUBMIT_FAILURE"}),i))throw r})}),_r=I(function(r){r&&r.preventDefault&&C(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&C(r.stopPropagation)&&r.stopPropagation(),q().catch(function(i){console.warn("Warning: An unhandled error was caught from submitForm()",i)})}),pr={resetForm:B,validateForm:g,validateField:ur,setErrors:lr,setFieldError:P,setFieldTouched:N,setFieldValue:U,setStatus:vr,setSubmitting:hr,setTouched:or,setValues:cr,setFormikState:dr,submitForm:q},Lr=I(function(){return tr(E.values,pr)}),Vr=I(function(r){r&&r.preventDefault&&C(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&C(r.stopPropagation)&&r.stopPropagation(),B()}),Mr=f.useCallback(function(r){return{value:m(E.values,r),error:m(E.errors,r),touched:!!m(E.touched,r),initialValue:m(A.current,r),initialTouched:!!m(M.current,r),initialError:m(V.current,r)}},[E.errors,E.touched,E.values]),Dr=f.useCallback(function(r){return{setValue:function(a,l){return U(r,a,l)},setTouched:function(a,l){return N(r,a,l)},setError:function(a){return P(r,a)}}},[U,N,P]),kr=f.useCallback(function(r){var i=K(r),a=i?r.name:r,l=m(E.values,a),d={name:a,value:l,onChange:z,onBlur:Y};if(i){var h=r.type,S=r.value,_=r.as,Q=r.multiple;h==="checkbox"?S===void 0?d.checked=!!l:(d.checked=!!(Array.isArray(l)&&~l.indexOf(S)),d.value=S):h==="radio"?(d.checked=l===S,d.value=S):_==="select"&&Q&&(d.value=d.value||[],d.multiple=!0)}return d},[Y,z,E.values]),J=f.useMemo(function(){return!k(A.current,E.values)},[A.current,E.values]),Or=f.useMemo(function(){return typeof y<"u"?J?E.errors&&Object.keys(E.errors).length===0:y!==!1&&C(y)?y(c):y:E.errors&&Object.keys(E.errors).length===0},[y,J,E.errors,c]),wr=T({},E,{initialValues:A.current,initialErrors:V.current,initialTouched:M.current,initialStatus:w.current,handleBlur:Y,handleChange:z,handleReset:Vr,handleSubmit:_r,resetForm:B,setErrors:lr,setFormikState:dr,setFieldTouched:N,setFieldValue:U,setFieldError:P,setStatus:vr,setSubmitting:hr,setTouched:or,setValues:cr,submitForm:q,validateForm:g,validateField:ur,isValid:Or,dirty:J,unregisterField:Fr,registerField:Cr,getFieldProps:kr,getFieldMeta:Mr,getFieldHelpers:Dr,validateOnBlur:o,validateOnChange:u,validateOnMount:v});return wr}function Gr(e){var t={};if(e.inner){if(e.inner.length===0)return O(t,e.path,e.message);for(var o=e.inner,u=Array.isArray(o),n=0,o=u?o:o[Symbol.iterator]();;){var s;if(u){if(n>=o.length)break;s=o[n++]}else{if(n=o.next(),n.done)break;s=n.value}var v=s;m(t,v.path)||(t=O(t,v.path,v.message))}}return t}function Wr(e,t,u,n){u===void 0&&(u=!1);var o=er(e);return t[u?"validateSync":"validate"](o,{abortEarly:!1,context:o})}function er(e){var t=Array.isArray(e)?[]:{};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var n=String(u);Array.isArray(e[n])===!0?t[n]=e[n].map(function(o){return Array.isArray(o)===!0||yr(o)?er(o):o!==""?o:void 0}):yr(e[n])?t[n]=er(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function jr(e,t,u){var n=e.slice();return t.forEach(function(s,v){if(typeof n[v]>"u"){var y=u.clone!==!1,F=y&&u.isMergeableObject(s);n[v]=F?rr(Array.isArray(s)?[]:{},s,u):s}else u.isMergeableObject(s)?n[v]=rr(e[v],s,u):e.indexOf(s)===-1&&n.push(s)}),n}function Kr(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function $r(e,t,u){if(typeof e=="boolean")return!!t;var n=[],o=!1,s=-1;if(Array.isArray(e))n=e,s=e.indexOf(u),o=s>=0;else if(!u||u=="true"||u=="false")return!!t;return t&&u&&!o?n.concat(u):o?n.slice(0,s).concat(n.slice(s+1)):n}var zr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?f.useLayoutEffect:f.useEffect;function I(e){var t=f.useRef(e);return zr(function(){t.current=e}),f.useCallback(function(){for(var u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];return t.current.apply(void 0,n)},[])}var Yr=f.forwardRef(function(e,t){var u=e.action,n=mr(e,["action"]),o=u??"#",s=Br(),v=s.handleReset,y=s.handleSubmit;return f.createElement("form",T({onSubmit:y,ref:t,onReset:v,action:o},n))});Yr.displayName="Form";export{re as u};
