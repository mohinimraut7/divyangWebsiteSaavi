(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{67:function(e,t,s){Promise.resolve().then(s.bind(s,4741)),Promise.resolve().then(s.bind(s,5812)),Promise.resolve().then(s.t.bind(s,6168,23)),Promise.resolve().then(s.t.bind(s,6927,23)),Promise.resolve().then(s.bind(s,1770)),Promise.resolve().then(s.t.bind(s,3994,23))},8311:function(e,t,s){"use strict";s.d(t,{JX:function(){return Col},W2:function(){return Container},kC:function(){return Flex}});var l=s(7437);let Container=e=>{let{landingContainer:t,containerFluid:s,className:a,children:n}=e;return(0,l.jsx)("div",{className:(s?"container px-2 mx-auto ":t?"container lg:max-w-[82%] mx-auto px-4 lg:px-0 ":"container lg:max-w-4xl mx-auto px-4 lg:px-0 ")+" ".concat(a||""),children:n})},Flex=e=>{let{className:t,children:s,isFlexOnResponsive:a,space:n}=e;return(0,l.jsx)("div",{className:(a?" flex items-center ":" grid grid-cols-1 md:flex flex-wrap ")+(n?" gap-".concat(n," "):" gap-4 ")+" justify-between items-center ".concat(t||""),children:s})},Col=e=>{let{children:t,className:s,forwardRef:a}=e;return(0,l.jsx)("div",{className:"".concat(s||" flex-1 "),ref:a,children:t})}},4579:function(e,t,s){"use strict";var l=s(7437);t.Z=e=>{let{size:t="default"}=e,s="small"===t?"h-2 w-2":"medium"===t?"h-3 w-3":"large"===t?"h-8 w-8":"h-5 w-5 ";return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"".concat(s," rounded-full mr-2 animate-bounce bg-sky-400")}),(0,l.jsx)("div",{className:"".concat(s," rounded-full mr-2 animate-bounce200  bg-sky-500")}),(0,l.jsx)("div",{className:"".concat(s," rounded-full mr-2 animate-bounce300  bg-sky-600")}),(0,l.jsx)("div",{className:"".concat(s," rounded-full animate-bounce400  bg-sky-700")})]})}},3228:function(e,t,s){"use strict";var l=s(7437),a=s(8311),n=s(3159),i=s(4579);t.Z=e=>{let{loading:t,failure:s,noData:o,coloredBg:r,children:d,minHeight:c,className:u,fullHeight:h}=e;return(0,l.jsxs)("div",{className:"flex justify-center items-center !bg-white "+(r?" ".concat(r||" bg-cyan-200 "," "):"")+(t&&" min-h-screen z-50 ")+(h&&" min-h-screen "),children:[t&&(0,l.jsx)(i.Z,{}),s&&(0,l.jsx)(a.W2,{className:"".concat(c||"min-h-[400px] "," w-full flex justify-center !p-0 ").concat(u||" "),containerFluid:!0,children:(0,l.jsxs)("div",{className:"p-4 text-red-900 text-center ",children:[(0,l.jsx)(n.DAO,{}),(0,l.jsx)("div",{children:d||"Some error occurred! Please try again later"})]})}),o&&(0,l.jsx)(a.W2,{className:"".concat(c||"min-h-[400px] ","  flex justify-center items-center !p-0  ").concat(u||" "),containerFluid:!0,children:(0,l.jsxs)("div",{className:"p-4 text-red-900 text-center",children:[(0,l.jsx)(n.DAO,{}),(0,l.jsx)("div",{children:d||"Sorry! No data Found"})]})})]})}},1064:function(e,t,s){"use strict";var l=s(7437);s(2265),t.Z=e=>{let{className:t}=e;return(0,l.jsx)("div",{className:"rounded-full border-2 border-solid animate-spin border-t-2 border-t-secondary-900 border-linen h-6 w-6 ".concat(t||"")})}},1796:function(e,t,s){"use strict";var l=s(7437);s(2265);var a=s(4741);t.Z=e=>{let{placeholderImage:t="/images/no-data.svg",title:s,subtitle:n,containerClassName:i="",imgHeight:o=250,imgWidth:r=250,children:d}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center  "+i,children:[(0,l.jsx)(a.CustomImage,{src:t,width:r,height:o,alt:"No data available"}),(0,l.jsx)("h3",{className:"text-lg text-center font-semibold  mt-2",children:s}),n&&(0,l.jsx)("span",{className:"text-sm text-center opacity-80 ",children:n}),(0,l.jsx)("div",{className:"flex flex-row items-center mt-4 ",children:d})]})})}},9736:function(e,t,s){"use strict";s.d(t,{Z:function(){return Layout_LogoIcon}});var l=s(7437),a=s(8311),n=s(4741);let CustomLink=e=>{let{isExternal:t,target:s,link:a,children:n,className:i,isNavLink:o,textTransform:r,onClick:d}=e;return(0,l.jsx)("a",{target:t?"_blank":s||"_self",className:(o&&" min-w-min px-2 text-blue-800 tracking-wide font-normal text-base hover:text-red-900 ")+" ".concat(i||" block "," ").concat("uppercase"===r?" uppercase ":"capitalize"===r?" capitalize ":"  "),href:a,rel:"noopener noreferrer",onClick:d||null,children:n})};var Layout_LogoIcon=e=>{let{big:t,customLogo:s}=e;return t?(0,l.jsx)(a.kC,{isFlexOnResponsive:!0,className:"!justify-center mb-6 w-full h-full !gap-1",children:(0,l.jsx)("div",{className:"flex-none relative",children:(0,l.jsx)(n.CustomImage,{src:s||"/images/logoIcon.svg",alt:"GovAI Logo",title:"GovAI Logo",width:141,height:100})})}):(0,l.jsx)("div",{className:"block",children:(0,l.jsx)(CustomLink,{className:"block relative h-[2.5rem] w-[2.5rem]",link:"/",children:(0,l.jsx)(n.CustomImage,{src:s||"/images/logoIcon.svg",layout:"fill",objectFit:"contain",alt:"GovAI Logo",title:"GovAI Logo"})})})}},7944:function(e,t,s){"use strict";var l=s(7437),a=s(2265),n=s(3164),i=s(6468),o=s(4741),r=s(1697),d=s(4033);function getChatInputCharacterLimit(e){if(void 0===e)return 200;let t=Number(e);return isNaN(t)?200:t}t.Z=e=>{let{value:t,disabled:s,onChange:c,intermediateStepsLoading:u,chatEndpointIsLoading:h,onClickStop:m,handelSubmit:x,providerName:v,showRestChat:g,onResetChat:p,customDisclaimer:f,showPoweredBy:j,chatInputCharacterLimit:w}=e,[y,b]=(0,a.useState)(null),[C,N]=(0,a.useState)(null),S=(0,d.useSearchParams)(),k=S.get("isEmbed"),I=(0,a.useRef)(null);return(0,a.useEffect)(()=>{I.current&&I.current.focus()},[]),(0,a.useEffect)(()=>{let handleMessage=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.action)==="handelOpeningBot"&&I.current&&I.current.focus()};return window.addEventListener("message",handleMessage,!1),()=>{window.removeEventListener("message",handleMessage)}},[]),(0,a.useEffect)(()=>{t||b(null)},[t]),(0,l.jsxs)("div",{className:"fle flex-col w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full items-center justify-center gap-2",children:[g()&&(0,l.jsx)(n.o,{isSmallBtn:!0,isGhostBtn:!0,iconBtn:!0,icon:i.A$d,iconSize:15,iconClass:"inline-block",isLeftIcon:!0,onClick:p,disabled:h||u,title:"Reset Chat",children:"Reset Chat"}),(0,l.jsxs)("div",{className:"flex relative w-full flex-row",children:[s?(0,l.jsx)("textarea",{className:" bg-gray-50 w-full py-2 pl-4 pr-8 md:pr-12 text-sm max-h-36  md:max-h-48 rounded-lg border border-linen  focus:outline-none focus:border-linen resize-none no-scrollbar ",value:t,disabled:!0,placeholder:"",style:{height:y||"auto",overflowY:"auto"}}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("textarea",{ref:I,className:" w-full py-2 pl-4 pr-8 md:pr-12 text-sm max-h-36  md:max-h-48 rounded-lg border border-linen  focus:outline-none focus:border-linen resize-none no-scrollbar ",value:t,onChange:e=>{c(e);let t=getChatInputCharacterLimit(w);e.target.value.length>t?N("Maximum allowed character limit is ".concat(t)):N(null)},onInput:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px",b(e.target.scrollHeight)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),null===C&&(x(e),b(null)))},placeholder:"Type something...",style:{height:y||"auto",overflowY:"auto"}})}),(0,l.jsx)("div",{className:"flex items-center  justify-center ",children:(0,l.jsx)("div",{className:"absolute right-2 z-10 ",children:(0,l.jsx)("div",{className:"flex flex-row gap-2",children:h?(0,l.jsx)("div",{title:"Stop responding",onClick:m,className:"!bg-primary-800 w-7 h-7 rounded-full flex items-center justify-center cursor-pointer",children:(0,l.jsx)(i.Wcw,{className:" h-3.5 w-3.5 text-white "})}):(0,l.jsx)(n.o,{type:"submit",title:"Send Message",iconBtn:!0,isReactIcon:!0,icon:r.XnA,isGhostBtn:!0,disabled:""===t||null!==C||h&&u,iconClass:"!m-0 w-6 h-6 !text-black ".concat(h||u?"opacity-50":"opacity-100"," ")})})})})]})]}),C&&(0,l.jsx)("div",{className:"text-xs text-red-500",children:C}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("span",{className:" mt-1 text-gray-500 text-center text-xs sm:text-sm",children:["*",f&&(null==f?void 0:f.length)>0?f:"".concat(v||"GovAI"," assistant can make\n          mistakes. Consider checking important information.")]}),"true"!==k&&(!0===j||void 0===j)&&(0,l.jsxs)("div",{className:"flex flex-row gap-2 justify-center items-center text-xs",children:[(0,l.jsx)("span",{children:"Powered by "}),(0,l.jsx)(o.CustomImage,{src:"/images/logo.svg",height:20,width:40,alt:"GovAI Logo"})," ","| NeGD | MeitY"]})]})]})}},7996:function(e,t,s){"use strict";s.d(t,{Z:function(){return chat_Sources}});var l=s(7437),a=s(1396),n=s.n(a);s(2265);let showSiteLeaveMsg=(e,t,s,l)=>{document.body.classList.add("overflow-y-hidden");let a=confirm(t||"This link will take you to external website.");a?(leaveSite(e),s&&s()):(closeModal(),l&&l())},leaveSite=e=>{document.body.classList.remove("overflow-y-hidden"),window.open(e,"_blank")},closeModal=()=>{document.body.classList.remove("overflow-y-hidden")};var i=s(4741);let extractKeys=e=>{let t="",s="",l="",a=e,n=/{.*?}/,i=e.match(n);if(i)try{let o=JSON.parse(i[0].replace(/'/g,'"'));t=o.source_url||"",s=o.act_name||"",l=o.file||"",a=e.replace(n,"").trim()}catch(t){console.error("Invalid JSON format",t),a=e}return{description:a,actName:s,sourceUrl:t,fileName:l}};var Custom_HighlightLinksWithText=e=>{let{className:t,text:s,providerName:a,customIcon:n}=e,{description:o,actName:r,sourceUrl:d,fileName:c}=extractKeys(s);return(0,l.jsxs)("div",{className:"flex flex-col gap-1 mb-1  rounded px-4 py-2 ".concat(d?"cursor-pointer hover:bg-gray-100":"cursor-default"," group "),onClick:()=>{d&&showSiteLeaveMsg(d)},children:[(0,l.jsxs)("div",{className:"flex flex-row gap-1 items-center justify-start",children:[(0,l.jsx)("div",{className:"flex-shrink-0 flex flex-col relative items-end h-[1rem] w-[1rem]",children:(0,l.jsx)(i.CustomImage,{src:n?"".concat("https://cdngovai.myscheme.in/").concat(n):"/images/logoIcon.svg",alt:"".concat(a," Logo"),title:"".concat(a," Logo"),layout:"fill",objectFit:"contain"})}),(0,l.jsx)("span",{className:"text-xs line-clamp-1",children:a})]}),(0,l.jsx)("span",{className:"line-clamp-2 text-sm font-semibold ".concat(d?"group-hover:underline":""),children:r}),(0,l.jsx)("p",{className:" text-sm font-normal leading-snug",children:o}),c&&(0,l.jsxs)("span",{className:"text-sm mt-1 text-gray-500 font-normal leading-snug",children:["File: ",c]})]})},chat_Sources=e=>{var t;return(0,l.jsx)("div",{className:"rounded text-sm text-left",children:null===(t=e.sources)||void 0===t?void 0:t.map((t,s)=>{var a,i,o,r,d,c,u,h,m,x;return(0,l.jsxs)("div",{className:"mt-2 flex flex-col",children:[t.page_content&&(0,l.jsx)(Custom_HighlightLinksWithText,{className:"font-normal text-sm",text:t.page_content,customIcon:e.customIcon,providerName:e.providerName}),t.metadata&&(0,l.jsx)(n(),{target:"_blank",className:"text-blue-500 underline",href:null==t?void 0:t.metadata,children:null==t?void 0:t.metadata}),(null===(a=t.metadata)||void 0===a?void 0:a.title)&&(0,l.jsxs)(l.Fragment,{children:['"',null===(i=t.metadata)||void 0===i?void 0:i.title,'"']}),(null===(r=t.metadata)||void 0===r?void 0:null===(o=r.loc)||void 0===o?void 0:o.lines)!==void 0?(0,l.jsxs)("div",{children:[(0,l.jsx)("br",{}),"Lines ",null===(u=t.metadata)||void 0===u?void 0:null===(c=u.loc)||void 0===c?void 0:null===(d=c.lines)||void 0===d?void 0:d.from," to"," ",null===(x=t.metadata)||void 0===x?void 0:null===(m=x.loc)||void 0===m?void 0:null===(h=m.lines)||void 0===h?void 0:h.to]}):""]},"source:"+s)})})}},5812:function(e,t,s){"use strict";s.r(t),s.d(t,{ChatWindow:function(){return ChatWindow}});var l=s(7437),a=s(3014);s(3343);var n=s(9251),i=s(2265),o=s(2510),r=s(8984),d=s(4741),c=s(6354),u=s(3473),CustomMarkDownRenderer=e=>{let{children:t}=e;return(0,l.jsx)(u.U,{components:{a:e=>{let{href:t,children:s}=e;return(0,l.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"(".concat(s,")")})}},children:t})},h=s(7996),m=s(1133),x=s(8910),modal_Overlay=e=>{let{isOpen:t,children:s,title:a,onClose:n,footer:i,customTitle:o,isAccessability:r}=e;return(0,m.Z)(t),(0,l.jsx)("div",{onClick:()=>n(),className:"h-screen w-screen fixed top-0 left-0 z-50 transform transition-transform ease-in-out duration-500 ".concat(t?"translate-x-0 backdrop-blur-sm":"translate-x-full"),children:(0,l.jsx)("div",{className:"relative h-full w-full right-0 overflow-y-auto",children:(0,l.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"absolute w-full h-full md:w-[70%] lg:w-[60%] xl:w-[50%] overflow-y-auto right-0 bg-white rounded-tl-lg rounded-bl-lg transition-transform ease-in-out duration-500 ".concat(t?"translate-x-0":"translate-x-full"),children:[(0,l.jsxs)("div",{className:"sticky top-0 flex flex-row items-center justify-between border-0 border-solid border-b-2 border-b-gray-300 py-3 px-6 bg-white z-10 mb-2",children:[o||(0,l.jsx)("h3",{className:"text-base font-semibold ",children:a}),(0,l.jsx)(x.FU5,{className:" cursor-pointer ",size:20,onClick:n})]}),(0,l.jsx)("div",{className:"px-2 py-2 overflow-y-auto",children:s}),i]})})})};function ChatMessageBubble(e){let[t,s]=(0,i.useState)(!1),a="",n=[];if((0,c.tp)(e.message.content)){let t=JSON.parse(e.message.content);a=null==t?void 0:t.answer,n=null==t?void 0:t.documents}else a=e.message.content;return(0,l.jsx)("div",{className:" mb-4 sm:mb-6 flex flex-col gap-x-4  text-base mx-auto w-full",children:"user"===e.message.role?(0,l.jsx)("div",{className:"flex w-full items-start  ",children:(0,l.jsxs)("div",{className:"flex items-center justify-start text-left gap-2 max-w-full sm:max-w-[80%] ",children:[(0,l.jsx)("div",{className:"flex-shrink-0 flex flex-col relative items-end",children:(0,l.jsx)("div",{className:"bg-secondary-200 bg-opacity-25 rounded-full w-10 h-10 flex items-center justify-center text-secondary-700",children:(0,l.jsx)(o.BKo,{})})}),(0,l.jsx)("div",{className:"px-4 py-3 rounded-r-2xl rounded-bl-2xl bg-secondary-200 bg-opacity-25 shadow-sm",children:(0,l.jsx)("p",{className:"flex-col gap-1 mt-0 text-sm leading-6",children:e.message.content})})]})}):(0,l.jsxs)("div",{className:"flex w-full gap-2 items-start  ",children:[(0,l.jsx)("div",{className:"flex-shrink-0 flex flex-col relative items-end h-[2rem] w-[2rem] sm:h-[2.5rem] sm:w-[2.5rem]",children:(0,l.jsx)(d.CustomImage,{src:e.customIcon?"".concat("https://cdngovai.myscheme.in/").concat(e.customIcon):"/images/logoIcon.svg",layout:"fill",alt:"".concat(e.providerName||"GovAI",' Logo"'),title:"".concat(e.providerName||"GovAI",' Logo"'),objectFit:"contain"})}),(0,l.jsxs)("div",{className:"relative flex max-w-full flex-col ",children:[(0,l.jsx)("div",{className:"markdownText  px-4 py-3  rounded-r-2xl rounded-bl-2xl bg-[#F3F4F6] shadow-sm text-sm leading-6",children:(0,l.jsx)(CustomMarkDownRenderer,{children:(0,c.ns)(a)})}),(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-row",children:[!1===e.showFeedback?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(r.Z,{copyValue:(0,c.ns)(a),messages:e.messages,domainId:e.domainId,chatContentId:e.message.id,feedback_setting:e.feedback_setting}),0!==n.length&&!e.isStreaming&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"cursor-pointer flex items-center justify-center px-2 py-1 rounded-md mt-2 border border-solid border-gray-400",onClick:()=>s(!0),children:(0,l.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Sources"})}),(0,l.jsx)(modal_Overlay,{title:"Sources",isOpen:t,onClose:()=>s(!1),children:(0,l.jsx)(h.Z,{sources:n,customIcon:e.customIcon,providerName:e.providerName})})]})]})]})]})})}function IntermediateStep(e){console.log("Intermediate step",e.message);let t=JSON.parse(e.message.content),s=t.action,a=t.observation,[n,o]=(0,i.useState)(!1);return(0,l.jsxs)("div",{className:"ml-auto bg-green-600 rounded px-4 py-2 max-w-[80%] mb-8 whitespace-pre-wrap flex flex-col cursor-pointer",children:[(0,l.jsxs)("div",{className:"text-right ".concat(n?"w-full":""),onClick:e=>o(!n),children:[(0,l.jsxs)("code",{className:"mr-2 bg-slate-600 px-2 py-1 rounded hover:text-blue-600",children:["\uD83D\uDEE0️ ",(0,l.jsx)("b",{children:s.tool})]}),(0,l.jsx)("span",{className:n?"hidden":"",children:"\uD83D\uDD3D"}),(0,l.jsx)("span",{className:n?"":"hidden",children:"\uD83D\uDD3C"})]}),(0,l.jsxs)("div",{className:"overflow-hidden max-h-[0px] transition-[max-height] ease-in-out ".concat(n?"max-h-[360px]":""),children:[(0,l.jsx)("div",{className:"bg-slate-600 rounded p-4 mt-1 max-w-0 ".concat(n?"max-w-full":"transition-[max-width] delay-100"),children:(0,l.jsxs)("code",{className:"opacity-0 max-h-[100px] overflow-auto transition ease-in-out delay-150 ".concat(n?"opacity-100":""),children:["Tool Input:",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),JSON.stringify(s.toolInput)]})}),(0,l.jsx)("div",{className:"bg-slate-600 rounded p-4 mt-1 max-w-0 ".concat(n?"max-w-full":"transition-[max-width] delay-100"),children:(0,l.jsx)("code",{className:"opacity-0 max-h-[260px] overflow-auto transition ease-in-out delay-150 ".concat(n?"opacity-100":""),children:a})})]})]})}var v=s(4026),g=s(7700),p=s(7944);s(4829);var f=s(4033),v9_Prompts=e=>{var t;let{initialMessage:s,conversationOpener:a,messages:n,onClick:o}=e;(0,f.useSearchParams)();let[r,d]=(0,i.useState)([]),c=(null==a?void 0:null===(t=a.questions)||void 0===t?void 0:t.length)&&0===n.length,u=c?null==a?void 0:a.questions.reduce((e,t,s)=>(s%2==0?e.push([t]):e[e.length-1].push(t),e),[]):[];return(0,l.jsx)(l.Fragment,{children:c?(0,l.jsx)("div",{className:"flex flex-col gap-2 md:gap-3 my-2 overflow-hidden",children:u.map((e,t)=>(0,l.jsx)("div",{className:"conv-starter-cont flex w-full flex-col gap-2 md:gap-3 md:flex-row justify-start md:justify-between",children:e.map((e,s)=>{let n=2*t+s,i=r[t]===n,c=n===a.questions.length-1&&a.questions.length%2!=0;return(0,l.jsx)("div",{onClick:()=>o(e.question),onMouseEnter:()=>{let e=[...r];e[t]=n,d(e)},onMouseLeave:()=>{let e=[...r];e[t]=null,d(e)},className:"text-center cursor-pointer bg-zinc-50 text-zinc-950 rounded-2xl conv-starter-item conv-item-".concat(n," p-3 sm:p-4 hover:bg-zinc-100 transition-all duration-200 ease-in-out ").concat(c&&"!w-full"),children:(0,l.jsx)("span",{title:e.question,className:"text-xs sm:text-sm ".concat(i?"whitespace-nowrap ":"line-clamp-1"," font-medium"),children:e.question})},n)})},t))}):(0,l.jsx)(l.Fragment,{})})},j=s(3498),w=s(1796),y=s(3228),b=s(9736),C=s(3164),N=s(6468),S=s(1421),k=s(1064),chat_FollowupQuestions=e=>{var t,s;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-full ",children:(null===(t=e.questions)||void 0===t?void 0:t.length)>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-3 my-2 overflow-hidden max-h-[6rem] sm:max-h-fit ",children:null===(s=e.questions)||void 0===s?void 0:s.map((t,s)=>(0,l.jsx)("div",{className:"flex justify-center items-center px-2 flex-grow rounded-lg shadow-sm border border-gray-300 cursor-pointer h-[2.5rem] ",onClick:()=>{e.onClick(t)},children:(0,l.jsx)("span",{title:t,className:"text-sm text-blue-500 line-clamp-1",children:(0,c.fm)(t)})},s))})})})},I=s(3611),_=s(2031),L=s(9348),chat_ChatLoading=e=>{let{customIcon:t,providerName:s,chatEndpointIsLoading:a,onClickStop:n}=e;return(0,l.jsxs)("div",{className:"flex w-full gap-2 items-start ",children:[(0,l.jsx)("div",{className:"flex-shrink-0 flex flex-col relative items-end h-[2rem] w-[2rem] sm:h-[2.5rem] sm:w-[2.5rem]",children:(0,l.jsx)(d.CustomImage,{src:t?"".concat("https://cdngovai.myscheme.in/").concat(t):"/images/logoIcon.svg",layout:"fill",alt:"".concat(s||"GovAI",' Logo"'),title:"".concat(s||"GovAI",' Logo"'),objectFit:"contain"})}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)("div",{className:"relative flex max-w-full flex-col ",children:(0,l.jsx)("div",{className:"markdownText  px-8 pt-2  rounded-r-2xl rounded-bl-2xl bg-[#F3F4F6] shadow-sm text-sm leading-6",children:(0,l.jsx)(C.o,{type:"submit",title:"Send Message",iconBtn:!0,isReactIcon:!0,icon:L.F1K,isGhostBtn:!0,disabled:a,iconClass:"!m-0 animate-spin-slow w-6 h-6 !text-black "})})}),(0,l.jsx)("div",{title:"Stop responding",onClick:n,className:"!bg-primary-800 w-7 h-7 rounded-full flex items-center justify-center cursor-pointer",children:(0,l.jsx)(N.Wcw,{className:" h-3.5 w-3.5 text-white "})})]})]})},M=s(3190),A=s(7911),D=s(4579);function addHttpsToLink(e){return/^https?:\/\//i.test(e)||(e="https://"+e),e}let Element=e=>{let{attributes:t,children:s,element:a}=e,n="";switch(((null==a?void 0:a.href)||(null==a?void 0:a.link)||(null==a?void 0:a.url))&&(n=addHttpsToLink((null==a?void 0:a.href)||(null==a?void 0:a.link)||(null==a?void 0:a.url))),"center"===a.align||"right"===a.align||a.align,a.type){case"block_quote":return(0,l.jsx)("blockquote",{...t,children:s});case"bulleted_list":case"ul_list":return(0,l.jsx)("ul",{...t,children:s});case"table":return(0,l.jsx)("table",{className:"border border-solid border-gray-300 w-full table-fixed border-collapse",children:(0,l.jsx)("tbody",{...t,children:s})});case"table_row":return(0,l.jsx)("tr",{className:" border-b border-gray-300",...t,children:s});case"table_cell":return(0,l.jsx)("td",{className:"border-solid border-r last:border-r-0 border-gray-300 p-2 text-sm",...t,children:s});case"ordered_list":case"ol_list":return(0,l.jsx)("ol",{type:"1",...t,children:s});case"heading_one":return(0,l.jsx)("h1",{...t,children:s});case"heading_two":return(0,l.jsx)("h2",{...t,children:s});case"heading_three":return(0,l.jsx)("h3",{...t,children:s});case"heading_four":return(0,l.jsx)("h4",{...t,children:s});case"heading_five":return(0,l.jsx)("h5",{...t,children:s});case"heading_six":return(0,l.jsx)("h6",{...t,children:s});case"list_item":return(0,l.jsx)("li",{...t,children:s});case"align_left":return(0,l.jsx)("div",{className:"text-left text-sm m-0",...t,children:s});case"align_right":return(0,l.jsx)("div",{className:"text-right text-sm m-0",...t,children:s});case"align_center":return(0,l.jsx)("div",{className:"text-center text-sm m-0",...t,children:s});case"link":return(0,l.jsx)("a",{href:n,className:"inline-block break-all",rel:"noreferrer noopener",target:"_blank",children:s});default:return(0,l.jsx)("div",{className:"mb-2",...t,children:s})}},Leaf=e=>{let{attributes:t,children:s,leaf:a}=e;return a.bold&&(s=(0,l.jsx)("strong",{children:s})),a.code&&(s=(0,l.jsx)("code",{children:s})),a.italic&&(s=(0,l.jsx)("em",{children:s})),a.strikeThrough&&(s=(0,l.jsx)("span",{style:{textDecoration:"line-through"},children:s})),a.underline&&(s=(0,l.jsx)("u",{children:s})),a.superscript&&(s=(0,l.jsx)("sup",{children:s})),a.subscript&&(s=(0,l.jsx)("sub",{children:s})),a.color&&(s=(0,l.jsx)("span",{style:{color:a.color},children:s})),a.bgColor&&(s=(0,l.jsx)("span",{style:{backgroundColor:a.bgColor},children:s})),(0,l.jsx)("span",{...t,children:s})};var slate_SlateEditor=e=>{let{value:t}=e,s=(0,i.useRef)(null),a=(0,i.useCallback)(e=>(0,l.jsx)(Leaf,{...e}),[]),n=(0,i.useCallback)(e=>(0,l.jsx)(Element,{...e}),[]);s.current||(s.current=(0,M.BU)((0,A.Jh)()));let o=s.current;return(null==t?void 0:t.length)&&(o.children=t),(null==t?void 0:t.length)?(0,l.jsx)(M.mH,{editor:o,initialValue:t,children:(0,l.jsx)(M.CX,{renderElement:n,placeholder:"",className:"markdown-options",readOnly:!0,renderLeaf:a})}):(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(D.Z,{})})};let E=[{type:"paragraph",children:[{text:"Either approach your nearest bank branch to apply (locate your nearest bank here - https://www.rbi.org.in/Scripts/query.aspx )"}]},{type:"paragraph",children:[{text:""}]},{type:"paragraph",children:[{text:"Or Through the Lead District Manager (LDM) (find the address and the email of the LDM of your district here - https://www.standupmitra.in/LDMS#NoBack )"}]},{type:"paragraph",children:[{text:""}]},{type:"paragraph",children:[{text:"Or Apply Through Portal : "},{text:"www.standupmitra.in ",bold:!0}]},{type:"paragraph",children:[{text:""}]},{type:"paragraph",children:[{text:"Process:",bold:!0}]},{type:"ol_list",children:[{type:"list_item",children:[{text:"The first step is to visit the official portal of StandUp India at: https://www.standupmitra.in/Login/Register "}]},{type:"list_item",children:[{text:"Enter the full details of the business location."}]},{type:"list_item",children:[{text:"Select the category between SC, ST, Woman, and whether the stake held is 51% or higher."}]},{type:"list_item",children:[{text:"Select the nature of the proposed business; the loan amount desired description of the business, the details of the premises, etc."}]},{type:"list_item",children:[{text:"Populate the fields with past business experience, including tenure."}]},{type:"list_item",children:[{text:"Select the need for hand-holding is required."}]},{type:"list_item",children:[{text:"Enter all the personal details sought, which include the name of the enterprise and the constitution."}]},{type:"list_item",children:[{text:"The last step is to select the register button to complete the process."}]}]},{type:"paragraph",children:[{text:""}]},{type:"paragraph",children:[{text:"Once you have completed registration, you are eligible to initiate the StandUp India Loan Application process with the respective financial institution for the officials to contact you for completing the StandUp India Loan Process and requisite formalities."}]},{type:"paragraph",children:[{text:""}]}];function ChatWindow(e){var t,s;let o=(0,i.useRef)(null),navigateToChatEnd=()=>{o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[r,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{(0,c.YI)().then(e=>{u(e)})},[]);let{endpoint:h,showIntermediateStepsToggle:m,emoji:L,assistantData:M}=e;(0,f.useRouter)();let{updateChatSessionMessages:A,createNewChatSession:D}=(0,S.Z)(),{state:Z}=(0,v.j_)(),{actions:B}=(0,v.j_)({updateAssistant:g.updateAssistant,createChatSession:g.createChatSession,setSelectedChatSession:g.setSelectedChatSession,updateChatSession:g.updateChatSession}),{token:F,loginStatus:O,login:P}=(0,j.aC)(),[z,J]=(0,i.useState)(!1),[R,T]=(0,i.useState)(!1),[q,G]=(0,i.useState)(),[U,V]=(0,i.useState)(!1),[X,H]=(0,i.useState)({}),[K,Q]=(0,i.useState)(!1),[W,Y]=(0,i.useState)(""),[$,ee]=(0,i.useState)(!1),[et,es]=(0,i.useState)([]),[el,ea]=(0,i.useState)([]),[en,ei]=(0,i.useState)();(0,f.useSearchParams)();let eo=null==Z?void 0:null===(t=Z.selectedChatSession)||void 0===t?void 0:t._id,[er,ed]=(0,i.useState)(!1),[ec,eu]=(0,i.useState)(!1),eh=(0,i.useRef)(null),[em,ex]=(0,i.useState)("showLoading"),[ev,eg]=(0,i.useState)(!0),{messages:ep,input:ef,setInput:ej,handleInputChange:ew,handleSubmit:ey,isLoading:eb,setMessages:eC,stop:eN,append:eS}=(0,n.RJ)({api:h,headers:{"Content-Type":"application/json",Authorization:F&&(null==M?void 0:M.isAuthenticated)?"Bearer ".concat(F):"Basic ".concat("bXlzY2hlbWVfcmFnX3NlcnZpY2U6a2pqZ2V0dXBieDg5MDY3ODc4"),"x-api-key":"MEpg04&*@%^Vng!KL","x-fp-id":r||""},body:{app_id:null==M?void 0:M.domainId,app_type:"system",entity_id:null==M?void 0:M.orgId,session_id:eo||""},onResponse(e){eg(!0);let t=e.headers.get("x-sources"),s=t?JSON.parse(atob(t)):[],l=e.headers.get("x-message-index");s.length&&null!==l&&H({...X,[l]:s})},onError:e=>{try{let t=JSON.parse(e.message);console.log("errr ",t),(null==t?void 0:t.statusCode)===429?(Q(!0),Y(null==t?void 0:t.error)):(null==t?void 0:t.statusCode)===412||(null==t?void 0:t.statusCode)==="412"?(ee(!0),Q(!1),Y("")):(0,a.Am)(null==t?void 0:t.error,{theme:"dark"})}catch(e){(0,a.Am)("Something went wrong",{theme:"dark"})}},initialMessages:el}),ek=m&&(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"checkbox",id:"show_intermediate_steps",name:"show_intermediate_steps",checked:z,onChange:e=>J(e.target.checked)}),(0,l.jsx)("label",{htmlFor:"show_intermediate_steps",children:" Show intermediate steps"})]});function getInitialMessage(e){if(e&&Array.isArray(null==e?void 0:e.openers)&&(null==e?void 0:e.openers.length)>0){var t,s,l,a;if((null==M?void 0:null===(t=M.conversationOpeners)||void 0===t?void 0:t.random)==="Yes"){let t=Math.floor(Math.random()*(null==e?void 0:e.openers.length)),l={role:"assistant",id:(0,c.O1)(8),content:null==e?void 0:null===(s=e.openers[t])||void 0===s?void 0:s.description};ea([l]),ei(null==e?void 0:e.openers[t])}else{let t=null==e?void 0:e.openers.filter(e=>"High"===e.priority);if(t.length>0){let e={role:"assistant",id:(0,c.O1)(8),content:null===(l=t[0])||void 0===l?void 0:l.description};ea([e]),ei(t[0])}else{let t={role:"assistant",id:(0,c.O1)(8),content:null==e?void 0:null===(a=e.openers[0])||void 0===a?void 0:a.description};ea([t]),ei(null==e?void 0:e.openers[0])}}}else ea(void 0),ei(void 0)}async function sendMessage(e){if(e.preventDefault(),es([]),eg(!1),o.current&&o.current.classList.add("grow"),ep.length||await new Promise(e=>setTimeout(e,300)),null!=eb?!eb:!U){if(z){V(!0),ej("");let e=ep.concat({id:ep.length.toString(),content:ef,role:"user"});eC(e);let s=new Headers;s.append("x-api-key","MEpg04&*@%^Vng!KL"),s.append("x-fp-id",r||"");let l=await fetch(h,{method:"POST",body:JSON.stringify({messages:e,show_intermediate_steps:!0}),headers:s}),n=await l.json();if(V(!1),200===l.status){var t;let s=(null!==(t=n.intermediate_steps)&&void 0!==t?t:[]).map((t,s)=>({id:(e.length+s).toString(),content:JSON.stringify(t),role:"system"}));for(let t of s)e.push(t),eC([...e]),await new Promise(e=>setTimeout(e,1e3+1e3*Math.random()));eC([...e,{id:(e.length+s.length).toString(),content:n.output,role:"assistant"}])}else if(n.error)throw(0,a.Am)(n.error,{theme:"dark"}),Error(n.error)}else ey(e)}}let handelResetChat=()=>{var e;eC([]),es([]),null==eh||null===(e=eh.current)||void 0===e||e.cancel("Reset chat"),B.setSelectedChatSession(null)};(0,i.useEffect)(()=>{if(M){var e,t;B.updateAssistant(M),(null==Z?void 0:Z.selectedChatSession)&&(null==Z?void 0:null===(e=Z.selectedChatSession)||void 0===e?void 0:e.messages.length)>1&&eo?(es([]),eC(null==Z?void 0:null===(t=Z.selectedChatSession)||void 0===t?void 0:t.messages)):(eC([]),es([])),getInitialMessage(null==M?void 0:M.conversationOpeners)}},[M,eo]),(0,i.useEffect)(()=>{if(!eb&&ep.length>0){let e=ep.filter(e=>"user"===e.role);e.length>=2&&(null==M||M.showSuggestions),eo&&(null==M?void 0:M.saveHistory)&&("loggedIn"===O?A(eo,ep):B.updateChatSession({id:eo,messages:ep}))}return()=>{eh.current&&eh.current.cancel("Component unmounted, request canceled")}},[null==ep?void 0:ep.length,eb,K,$]),(0,i.useEffect)(()=>{var e;(null==M?void 0:null===(e=M.status)||void 0===e?void 0:e.toLowerCase())==="active"?(null==M?void 0:M.isAuthenticated)===!0&&"loggedOut"===O?ex("showLogin"):M?ex("showChat"):ex("showLoading"):ex("showNotActive")},[M]),(0,i.useEffect)(()=>{let handleMessage=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.action)==="handelCloseBotIcon"&&eu(!0)};return window.addEventListener("message",handleMessage,!1),()=>{window.removeEventListener("message",handleMessage)}},[]),(0,i.useEffect)(()=>{navigateToChatEnd()},[ep]);let[eI,e_]=(0,i.useState)(!1);return(0,l.jsxs)("div",{className:"flex h-full flex-col items-center rounded grow text-base mx-auto gap-3 lg:px-1",children:[(0,l.jsx)(_.Vq,{open:ec,onOpenChange:eu,children:(0,l.jsxs)(_.cZ,{children:[(0,l.jsx)(x.eJU,{className:"text-center text-red-500",size:30}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(_.$N,{className:"dark:text-white leading-6",children:"Are you sure you want to end the chat session?"}),(0,l.jsx)(_.Be,{className:"mb-2",children:"This will reset the chat and clear all messages."})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-end items-center gap-2 ",children:[(0,l.jsx)(I.z,{variant:"secondary",onClick:()=>eu(!1),children:"No"}),(0,l.jsx)(I.z,{type:"submit",onClick:()=>{window.parent.postMessage({action:"handelCloseBotModal"},"*"),handelResetChat(),eu(!1)},children:"Yes"})]})]})}),(0,l.jsx)(modal_Overlay,{isOpen:eI,onClose:()=>e_(!1),title:" How to use the assistant",children:(0,l.jsx)("div",{className:"h-full",children:(0,l.jsx)(slate_SlateEditor,{value:E})})}),"showLoading"!==em&&"loading"!==O||R?(0,l.jsxs)(l.Fragment,{children:["showChat"===em&&!R&&(0,l.jsxs)("div",{className:"flex w-full h-full flex-col md:max-w-3xl mx-auto justify-between",children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-1 ".concat(void 0===ep.find(e=>(null==e?void 0:e.role)==="user")?"flex-col":"flex-col-reverse"," w-full mb-4 overflow-auto no-scrollbar transition-[flex-grow] ease-in-out"),ref:o,children:[eb&&!ev&&(0,l.jsx)(chat_ChatLoading,{chatEndpointIsLoading:eb,providerName:null==M?void 0:M.displayName,customIcon:null==M?void 0:M.icon,onClickStop:eN}),void 0!==ep.find(e=>(null==e?void 0:e.role)==="user")?[...ep].reverse().map((e,t)=>{let s=(ep.length-1-t).toString();return"system"===e.role?(0,l.jsx)(IntermediateStep,{message:e},t):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ChatMessageBubble,{message:e,aiEmoji:L,sources:X[s],providerName:null==M?void 0:M.displayName,customIcon:null==M?void 0:M.icon,messages:ep,domainId:(null==M?void 0:M.domainId)||"",isStreaming:null==M?void 0:M.isStreaming,feedback_setting:null==M?void 0:M.feedback_setting},(null==e?void 0:e.id)||t)})}):(0,l.jsxs)("div",{className:"flex flex-col gap-2 rounded-2xl bg-zinc-50 sm:p-8 p-4 text-sm sm:text-base mt-4",children:[(0,l.jsx)("div",{className:"flex flex-row items-center justify-start gap-2",children:(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl tracking-tight font-semibold max-w-fit inline-block",children:null==M?void 0:M.displayName})}),(0,l.jsx)("p",{className:"leading-normal text-zinc-900",children:null==M?void 0:M.description}),(0,l.jsx)("p",{className:"leading-normal text-zinc-900",children:el?null===(s=el[0])||void 0===s?void 0:s.content:""})]}),(ep.length>0||el&&(null==el?void 0:el.length)>1)&&(0,l.jsx)(l.Fragment,{children:null==el?void 0:el.map((e,t)=>(0,l.jsx)(ChatMessageBubble,{showFeedback:!1,message:{...e,content:"**".concat(null==M?void 0:M.displayName,"**   \n                               ").concat(null==M?void 0:M.description,"  \n                               ").concat(e.content)},aiEmoji:L,sources:[],providerName:null==M?void 0:M.displayName,customIcon:null==M?void 0:M.icon,messages:ep,domainId:(null==M?void 0:M.domainId)||""},(null==e?void 0:e.id)||t))})]}),er&&ep.length>1&&(0,l.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,l.jsx)(k.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-xs text-secondary-text",children:"Loading followup questions..."})]}),(0,l.jsx)(chat_FollowupQuestions,{questions:et,onClick:e=>{eS({role:"user",content:e}),es([]),eg(!1)}}),K&&(0,l.jsxs)("div",{className:"flex flex-row items-start justify-start gap-3 leading-7 p-4 text-sm mb-2 border border-red-100 bg-red-50 rounded-xl",children:[(0,l.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:"text-red-500 ",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V12Z",fill:"currentColor"}),(0,l.jsx)("path",{d:"M12 9.5C12.6904 9.5 13.25 8.94036 13.25 8.25C13.25 7.55964 12.6904 7 12 7C11.3096 7 10.75 7.55964 10.75 8.25C10.75 8.94036 11.3096 9.5 12 9.5Z",fill:"currentColor"}),(0,l.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"})]}),(0,l.jsx)("p",{children:W})]}),$&&(0,l.jsxs)("div",{className:"flex flex-row items-start justify-start gap-3 leading-7 p-4 text-sm mb-2 border border-red-100 bg-red-50 rounded-xl",children:[(0,l.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:"text-red-500 ",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V12Z",fill:"currentColor"}),(0,l.jsx)("path",{d:"M12 9.5C12.6904 9.5 13.25 8.94036 13.25 8.25C13.25 7.55964 12.6904 7 12 7C11.3096 7 10.75 7.55964 10.75 8.25C10.75 8.94036 11.3096 9.5 12 9.5Z",fill:"currentColor"}),(0,l.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:" text-base leading-tight mb-0",children:q||"Sorry! ".concat(null==M?void 0:M.displayName," can not be used right now.")}),(0,l.jsx)("p",{className:"m-0 mt-1 text-sm text-gray-500 text-center",children:"We are enhancing the assistant to return better answers. Please try again later."})]})]})]}),(0,l.jsx)("div",{className:" pt-2 md:pt-0 dark:border-white/20 md:border-transparent md:dark:border-transparent",children:(0,l.jsx)("form",{onSubmit:async e=>{!eo&&(null==M?void 0:M.domainId)&&(null==M?void 0:M.saveHistory)&&await D({domainId:null==M?void 0:M.domainId}),sendMessage(e),Q(!1),ee(!1),Y("")},className:"stretch mx-0 flex flex-row gap-3 last:mb-2 md:last:mb-6",children:(0,l.jsxs)("div",{className:"relative flex h-full flex-1 items-stretch flex-col overflow-hidden",children:[(0,l.jsx)("div",{className:"flex",children:ek}),(0,l.jsxs)("div",{className:"flex relative w-full flex-col",children:[M&&!K&&!$&&(0,l.jsx)(v9_Prompts,{onClick:async e=>{!eo&&(null==M?void 0:M.saveHistory)&&await D({domainId:null==M?void 0:M.domainId});let t=(0,c.O1)(8);eS({role:"user",content:e,id:t}),ee(!1),Q(!1),Y(""),eg(!1)},messages:ep,initialMessage:el||null,conversationOpener:en||null}),(0,l.jsx)(p.Z,{disabled:K||$,intermediateStepsLoading:U,chatEndpointIsLoading:eb,showRestChat:()=>!R&&!!en&&ep.length>1||!R&&ep.length>1,customDisclaimer:null==M?void 0:M.customDisclaimer,showPoweredBy:null==M?void 0:M.showPoweredBy,chatInputCharacterLimit:null==M?void 0:M.chatInputCharacterLimit,value:ef,onChange:ew,onClickStop:eN,handelSubmit:async e=>{!eo&&(null==M?void 0:M.domainId)&&(null==M?void 0:M.saveHistory)&&!K&&!$&&await D({domainId:null==M?void 0:M.domainId}),sendMessage(e),ee(!1),Q(!1),Y("")},providerName:null==M?void 0:M.displayName,onResetChat:handelResetChat})]})]})})}),(0,l.jsx)(a.Ix,{})]}),"showLogin"===em&&!R&&(0,l.jsxs)("div",{className:"h-[80vh] w-full flex flex-col items-center justify-center",children:[(0,l.jsx)(w.Z,{title:"Please login to continue"}),(0,l.jsx)(C.o,{iconBtn:!0,icon:N.SZ3,iconSize:10,onClick:()=>P(),className:"flex flex-row items-center",darkBtn:!0,iconClass:"h-4 w-4",children:"Login"})]}),("showNotActive"===em||R)&&(0,l.jsxs)("div",{className:"flex w-full h-full flex-col md:max-w-3xl mx-auto",children:[(0,l.jsxs)("div",{className:"w-full flex-1 flex flex-col items-center  mb-4 justify-center",children:[(null==M?void 0:M.logo)?(0,l.jsx)(d.CustomImage,{src:"".concat("https://cdngovai.myscheme.in/").concat(null==M?void 0:M.logo),alt:"".concat(null==M?void 0:M.displayName," Logo"),height:200,width:200,className:"mb-4"}):(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(b.Z,{})}),(0,l.jsx)("h1",{className:" text-center text-lg leading-tight mb-0",children:q||"Sorry! ".concat(null==M?void 0:M.displayName," can not be used right now.")}),(0,l.jsx)("p",{className:"m-0 mt-2 text-sm text-gray-500 text-center",children:"We are enhancing the assistant to return better answers. Please try again later."})]}),(0,l.jsx)("div",{className:"pt-2 md:pt-0 dark:border-white/20 md:border-transparent md:dark:border-transparent",children:(0,l.jsx)("form",{onSubmit:sendMessage,className:"stretch mx-0 flex flex-row gap-3 last:mb-2 md:last:mb-6",children:(0,l.jsxs)("div",{className:"relative flex h-full flex-1 items-stretch md:flex-col",children:[(0,l.jsx)("div",{className:"flex",children:ek}),(0,l.jsx)("div",{className:"flex relative w-full flex-col",children:(0,l.jsx)(p.Z,{disabled:!0,intermediateStepsLoading:U,chatEndpointIsLoading:eb,value:ef,onChange:ew,onClickStop:eN,handelSubmit:sendMessage,providerName:null==M?void 0:M.displayName,onResetChat:handelResetChat,showRestChat:()=>!1})})]})})})]})]}):(0,l.jsx)(y.Z,{loading:!0})]})}},3498:function(e,t,s){"use strict";s.d(t,{Vo:function(){return a},aC:function(){return useAuth}});var l=s(2265);let a=(0,l.createContext)({token:null,decodedToken:null,getSession:async()=>null,user:null,setUser:()=>{},loginStatus:"loading",setLoginStatus:()=>{},logout:()=>{},login:()=>{},showLogoutConfirmation:!1,setShowLogoutConfirmation:()=>{}});function useAuth(){return(0,l.useContext)(a)}},1421:function(e,t,s){"use strict";var l=s(3498),a=s(4829),n=s(4026),i=s(2265),o=s(7700),r=s(4033),d=s(7350),c=s(3014);t.Z=()=>{let[e,t]=(0,i.useState)(!1),{token:s,loginStatus:u}=(0,l.aC)(),{state:h}=(0,n.j_)(),{actions:m}=(0,n.j_)({createChatSession:o.createChatSession,saveChatSessions:o.saveChatSessions,setSelectedChatSession:o.setSelectedChatSession,deleteChatSession:o.deleteChatSession,updateChatSession:o.updateChatSession}),x=(0,r.useRouter)(),v=(0,r.useSearchParams)(),generateChatSessionID=async e=>{var l,n;let{domainId:i,title:o="Untitled"}=e;t(!0);let r=await a.Z.post("".concat("https://api.myscheme.gov.in/studio/v1/chat-history"),{domainId:i,title:o,messages:[]},{headers:{"x-api-key":"ICdhCnhQ4b8mnlvs2J4JV7BKdqQXL9cG62Xsc6UD",Authorization:"Bearer ".concat(s)}});if(200!==r.status||(null===(l=r.data)||void 0===l?void 0:l.statusCode)!==200)return t(!1),{sessionId:null,error:r};{let e=null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.data;return t(!1),m.createChatSession({domainId:null==e?void 0:e.domainId,_id:null==e?void 0:e._id}),{sessionId:null==e?void 0:e._id,error:null}}},createNewChatSession=async e=>{let{domainId:t,title:s="Untitled"}=e;if("loggedIn"===u){let e=await generateChatSessionID({domainId:t,title:s});await getSavedChats({domainId:t}),(null==e?void 0:e.sessionId)?v.get("isEmbed")?x.push("/".concat(t,"?sessionId=").concat(null==e?void 0:e.sessionId,"&isEmbed=true")):x.push("/".concat(t,"?sessionId=").concat(null==e?void 0:e.sessionId)):(0,c.Am)("Something went wrong! Please try again later",{theme:"dark"})}else{let e=(0,d.x0)();m.createChatSession({domainId:t,_id:e})}},getSavedChats=async e=>{let{currentPage:t=1,limit:l=10,domainId:n}=e,i=encodeURIComponent(JSON.stringify({domainId:n}));return await a.Z.get("".concat("https://api.myscheme.gov.in/studio/v1/chat-history","?page=").concat(t,"&limit=").concat(l,"&filters=").concat(i),{headers:{"x-api-key":"ICdhCnhQ4b8mnlvs2J4JV7BKdqQXL9cG62Xsc6UD",Authorization:"Bearer ".concat(s)}}).then(e=>{var t,s,l,a,n;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.statusCode)===200&&(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.results)&&m.saveChatSessions(null===(n=e.data)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.results.map(e=>({...e,messages:[]})))}).catch(e=>{(0,c.Am)("Something went wrong! Please try again later",{theme:"dark"})})},getChatSessionData=async(e,t)=>{if(!s){var l;let s=null==h?void 0:null===(l=h.savedChatSessions)||void 0===l?void 0:l.find(t=>(null==t?void 0:t._id)===e);return m.setSelectedChatSession(s),x.push("/".concat(t))}return a.Z.get("".concat("https://api.myscheme.gov.in/studio/v1/chat-history","/").concat(e),{headers:{"x-api-key":"ICdhCnhQ4b8mnlvs2J4JV7BKdqQXL9cG62Xsc6UD",Authorization:"Bearer ".concat(s)}}).then(e=>{var t,s,l,a,n;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.statusCode)===200&&(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.data)&&(m.setSelectedChatSession(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.data),x.push("/".concat(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.domainId)))}).catch(e=>{(0,c.Am)("Something went wrong! Please try again later",{theme:"dark"})})},deleteChatSessionData=async(e,t)=>{var l,n;let i=(null===(l=h.savedChatSessions)||void 0===l?void 0:l.filter(t=>t._id!==e))||[];return s?a.Z.delete("".concat("https://api.myscheme.gov.in/studio/v1/chat-history","/").concat(e),{headers:{"x-api-key":"ICdhCnhQ4b8mnlvs2J4JV7BKdqQXL9cG62Xsc6UD",Authorization:"Bearer ".concat(s)}}).then(async s=>{var l,a,n;(null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.statusCode)===200&&(null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data)&&(m.deleteChatSession(e),(null==i?void 0:i.length)>0?await getChatSessionData(null===(n=i[0])||void 0===n?void 0:n._id,t):x.push("/"))}).catch(e=>{(0,c.Am)("Something went wrong! Please try again later",{theme:"dark"})}):(m.deleteChatSession(e),(null==i?void 0:i.length)>0)?await getChatSessionData(null===(n=i[0])||void 0===n?void 0:n._id,t):x.push("/")},addNewMessages=async(e,t)=>a.Z.patch("".concat("https://api.myscheme.gov.in/studio/v1/chat-history","/").concat(e),{messages:t},{headers:{"x-api-key":"ICdhCnhQ4b8mnlvs2J4JV7BKdqQXL9cG62Xsc6UD",Authorization:"Bearer ".concat(s)}}).then(t=>{var s,l,a;(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.statusCode)===200&&(null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.data)&&m.updateChatSession({id:e,messages:null===(a=t.data.data)||void 0===a?void 0:a.messages})}).catch(e=>{(0,c.Am)("Something went wrong! Please try again later",{theme:"dark"})}),updateChatSessionMessages=async(e,t)=>{var s;if(!Array.isArray(t))throw Error("Messages should be an array");let l=(null===(s=h.selectedChatSession)||void 0===s?void 0:s.messages)||[],a=t.filter(e=>!l.some(t=>t.content===e.content&&t.role===e.role)),n=a.map(t=>addNewMessages(e,{content:t.content,role:t.role}));try{let e=await Promise.all(n);return e}catch(e){throw(0,c.Am)("Something went wrong with one or more updates! Please try again later",{theme:"dark"}),e}},updateSessionTitle=async(e,t)=>s?a.Z.patch("".concat("https://api.myscheme.gov.in/studio/v1/chat-history","/").concat(e),{title:t},{headers:{"x-api-key":"ICdhCnhQ4b8mnlvs2J4JV7BKdqQXL9cG62Xsc6UD",Authorization:"Bearer ".concat(s)}}).then(t=>{var s,l,a;(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.statusCode)===200&&(null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.data)&&m.updateChatSession({id:e,title:null===(a=t.data.data)||void 0===a?void 0:a.title})}).catch(e=>{(0,c.Am)("Something went wrong! Please try again later",{theme:"dark"})}):m.updateChatSession({id:e,title:t});return{loading:e,createNewChatSession,getSavedChats,getChatSessionData,deleteChatSessionData,updateChatSessionMessages,updateSessionTitle}}},1133:function(e,t,s){"use strict";var l=s(2265);t.Z=e=>{(0,l.useEffect)(()=>{if(document){var t,s,l,a;e?null===(s=document)||void 0===s||null===(t=s.body)||void 0===t||t.classList.add("overflow-hidden"):null===(a=document)||void 0===a||null===(l=a.body)||void 0===l||l.classList.remove("overflow-hidden")}},[e])}}},function(e){e.O(0,[420,582,190,306,169,33,815,603,998,114,863,769,965,396,300,419,971,472,744],function(){return e(e.s=67)}),_N_E=e.O()}]);